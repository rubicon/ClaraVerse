# ============================================================================
# ClaraVerse Environment Configuration (Self-Hosted / OSS)
# ============================================================================
# This is the SINGLE SOURCE OF TRUTH for Docker Compose deployments.
# Docker Compose automatically reads this file.
#
# Setup Instructions:
#   1. Copy this file: cp .env.example .env
#   2. Fill in required values (marked with TODO)
#   3. Run: docker-compose up --build
# ============================================================================

# ================================
# ENVIRONMENT MODE
# ================================
# Options: development, production
ENVIRONMENT=development

# ================================
# FRONTEND URLs (for building)
# ================================
# Development: http://localhost:3001 / ws://localhost:3001
# Production:  https://api.yourdomain.com / wss://api.yourdomain.com
VITE_API_BASE_URL=http://localhost:3001
VITE_WS_URL=ws://localhost:3001

# ================================
# LOCAL JWT AUTHENTICATION
# ================================
# Secret key for signing JWT tokens (min 32 characters)
# TODO: Generate with: openssl rand -hex 32
JWT_SECRET=change_me_to_a_random_secret_at_least_32_chars

# Token expiry settings
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=168h

# ================================
# BACKEND CONFIGURATION
# ================================
# CORS: Comma-separated allowed origins
# Development: http://localhost,http://localhost:5173,http://localhost:5174
# Production:  https://yourdomain.com
ALLOWED_ORIGINS=http://localhost,http://localhost:5173,http://localhost:5174,http://localhost:3000,http://localhost:8080

# Encryption key for user data (MongoDB conversations, credentials)
# TODO: Generate with: openssl rand -hex 32
# WARNING: Losing this key = losing access to encrypted data!
ENCRYPTION_MASTER_KEY=

# Frontend URL
FRONTEND_URL=http://localhost:5173

# Backend public URL (for generating download URLs)
BACKEND_URL=http://localhost:3001

# ================================
# MYSQL DATABASE
# ================================
# MySQL root password (default: claraverse_root_2024)
MYSQL_ROOT_PASSWORD=claraverse_root_2024

# MySQL user password (default: claraverse_pass_2024)
MYSQL_PASSWORD=claraverse_pass_2024

# ================================
# MONGODB & REDIS
# ================================
# MongoDB - for conversations, workflows, and data persistence
# Docker:     mongodb://mongodb:27017/claraverse
# Atlas:      mongodb+srv://user:pass@cluster.mongodb.net/claraverse
# Self-host:  mongodb://user:pass@host:27017/claraverse
MONGODB_URI=mongodb://mongodb:27017/claraverse

# Redis - for job scheduling and WebSocket pub/sub
REDIS_URL=redis://redis:6379

# ================================
# EXTERNAL SERVICES
# ================================
# E2B Code Interpreter (optional - for code execution)
# Get API key from: https://e2b.dev/dashboard
E2B_API_KEY=

# SearXNG (internal Docker URL, or comma-separated for load balancing)
SEARXNG_URLS=http://searxng:8080

# Composio (optional - for integrations)
COMPOSIO_API_KEY=
COMPOSIO_GOOGLESHEETS_AUTH_CONFIG_ID=
COMPOSIO_GMAIL_AUTH_CONFIG_ID=

# ================================
# ADMIN (Optional)
# ================================
# The first registered user automatically becomes admin.
# Additional superadmins can be added by comma-separated user IDs.
SUPERADMIN_USER_IDS=

# ================================
# RATE LIMITING (requests per minute)
# ================================
# Global API rate limit (all /api/* routes)
RATE_LIMIT_GLOBAL_API=200

# Public read-only endpoints
RATE_LIMIT_PUBLIC_READ=120

# Authenticated user requests
RATE_LIMIT_AUTHENTICATED=60

# WebSocket connections
RATE_LIMIT_WEBSOCKET=20

# Image proxy (to prevent bandwidth abuse)
RATE_LIMIT_IMAGE_PROXY=60
